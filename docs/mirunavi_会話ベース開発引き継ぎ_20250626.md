
# 🧠 ミルナビ会話履歴まとめ（2025年6月25日〜26日）

## 🎯 目的
Z世代女性向けのチャット応募UIをNext.js＋Tailwind＋Supabaseで構築。会話は実装仕様・文言・テスト・DB連携まで細かく進行したため、全てを引き継ぎ可能な形で要約。

---

## 🧾 全体タイムライン式まとめ

### 🟩 6月25日：チャット構想・UI・Bot文設計
- TikTok風チャットUIにてボット応募を構築する方針決定
- UI：1080x1920、白背景＋黒テキスト、ユーザー右寄せ、Bot左＋アイコン
- 会話構造：
  - 最初：不安要素の選択肢（最大10テーマ）
  - BotがZ世代口調で返信
  - 応募理由・年代・働き方を順に選択
  - 応募文を自動生成 → 3択＋修正 or やめる

### ✅ 仕様決定メモ
- 全選択式（入力欄なし）
- 「特にない」→ 電話確認 → 応募質問へ
- Botの返信テンプレは10パターン必須
- 応募文は intro / style / reason の3分構成
- Chat閉じるとリセット、再開は最初から
- 会話は上から下へスクロール、戻るボタンあり

---

### 🟨 6月26日：Supabase構築＆schema.ts作成
- Supabaseアカウント登録 → mirunavi-org → mirunaviプロジェクト作成
- SQL Editorで以下のテーブル作成：

| テーブル名             | 説明                     |
|------------------------|--------------------------|
| bot_questions          | 年代・働き方・応募理由 |
| bot_responses          | 不安テーマ返答集       |
| application_templates  | 応募文テンプレ         |

- idはすべて `uuid_generate_v4()` を設定
- SQLタブ3つに分けて `INSERT INTO` 成功

---

## 🧩 schema.ts 内容（保存先：data/bot/schema.ts）
- `BotQuestion`：年代/働き方/理由＋fallbackあり
- `BotResponse`：テーマに対するZ世代寄り共感文
- `ApplicationTemplate`：応募文構成（intro/style/reason）

```ts
export const sampleBotQuestions = [ ... ]
export const sampleBotResponses = [ ... ]
export const sampleApplicationTemplates = [ ... ]
```

---

## 🔁 エラー＆対応履歴
- uuidを `"a1"` と入れてエラー → 自動生成に切替
- INSERT文がnullで失敗 → id省略構文に修正
- SQL再実行で "already exists" → INSERTのみ分離して回避
- 全てGUIまたはSQL Editorで検証完了

---

## 🔚 状態まとめ
- schema.ts はフル実装済（キャンバス反映済）
- Supabase構造と完全一致
- 全初期データ3〜5件ずつ投入済み
- 次は `admin/` にて管理画面構築 or チャットと連携処理

---

（このファイルは引き継ぎ記録用です。補完必要な場合は会話ログ元から再抽出可能）
