<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>チャットボット</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<style>
body {
  margin: 0;
  font-family: "Noto Sans JP", sans-serif;
  max-width: 1080px;
  height: 100vh;
  background: #fff;
  color: #000;
  display: flex;
  flex-direction: column;
  margin: 0 auto;
}

.notice {
  padding: 12px 20px;
  font-size: 16px;
  line-height: 1.7;
  border-bottom: 1px solid #000;
}

.chat-area {
  flex: 1;
  overflow-y: auto;
  padding: 0 20px 60px 20px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.bot-comment {
  display: flex;
  align-items: flex-start;
  font-size: 18px;
  margin-top: 24px;
  line-height: 1.8;
  word-break: break-word;
}

.bot-comment img {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  margin-right: 8px;
  margin-top: 2px;
  object-fit: cover;
}

.bot-comment-text {
  position: relative;
  top: -7px;
  max-width: 90vw;
  word-break: break-word;
}

.options-wrap {
  margin-left: 56px;
  display: flex;
  flex-direction: column;
  gap: 2px;
  align-items: flex-start;
}

.option-btn {
  background: none;
  border: none;
  color: #1976d2;
  font-size: 17px;
  text-decoration: underline;
  cursor: pointer;
  line-height: 1.5;
  padding: 10px 0;
  font-family: inherit;
  text-align: left;
  min-width: 60vw;
  border-radius: 8px;
  transition: background 0.15s;
  word-break: break-word;
}

.option-btn:hover {
  color: #1454a5;
  background: rgba(25,118,210,0.07);
}

.user-comment {
  margin-left: 56px;
  font-size: 17px;
  color: #222;
  line-height: 1.7;
  max-width: 90vw;
  word-break: break-word;
  text-align: left;
}

.bot-typing {
  margin-left: 56px;
  font-size: 15px;
  color: #aaa;
  font-style: italic;
}

select {
  font-size: 17px;
  border: 1px solid #ccc;
  border-radius: 3px;
  padding: 0 2px;
  margin-right: 4px;
  margin-top: 8px;
}

.pulldown-wrap {
  margin-top: 4px;
}

/* 応募文完成用：中央寄せブロック専用 */
.center-text-block {
  max-width: 400px;
  margin: 0 auto;
  padding: 0 12px;
  box-sizing: border-box;
  font-size: 16px;
  line-height: 1.8;
  text-align: left;
}

@media (max-width:700px) {
  html, body {
    max-width: 100vw;
    width: 100vw;
    overflow-x: hidden;
    font-size: 17px;
    background: #fff;
  }

  .notice {
    font-size: 15px;
    padding: 10px 4vw;
  }

  .chat-area {
    padding: 0 4vw 24px 4vw;
    gap: 18px;
  }

  .bot-comment {
    font-size: 16px;
    line-height: 1.9;
    margin-top: 18px;
    max-width: 100vw;
  }

  .bot-comment-text {
    font-size: 16px;
    max-width: 92vw;
    line-height: 1.9;
    word-break: break-word;
    white-space: pre-line;
    padding-right: 1em;
    box-sizing: border-box;
    text-align: left;
  }

  /* 全ての free-text 回答はまず浅めのインデント */
  .user-comment {
    margin-left: 32px;
    font-size: 16px;
    max-width: 92vw;
    line-height: 1.9;
    word-break: break-word;
    white-space: pre-line;
    padding-right: 1em;
    box-sizing: border-box;
    text-align: left;
  }

  /* ただし、bot-comment に続く最初の free-text は深めに */
  .chat-area .bot-comment + .user-comment {
    margin-left: 56px;
  }

  /* リンクはさらに深いインデント */
  .options-wrap {
    margin-left: 32px;  /* リンクの親コンテナを少し押し出し */
  }
  .options-wrap .option-btn {
    margin-left: 24px;  /* 各リンクをさらに右へ */
  }

  /* 応募文完成ブロックだけ中央寄せ＆幅固定 */
  .center-text-block {
    max-width: 94vw;
    min-width: 0;
    margin: 0 auto;
    padding: 0 12px;
    box-sizing: border-box;
    font-size: 16px;
    line-height: 1.8;
    text-align: left;
  }

  .options-wrap.apps-wrap {
    max-width: 400px !important;
    margin: 0 auto !important;
    padding: 0 12px !important;
    box-sizing: border-box;
    align-items: flex-start;
    gap: 2px;
    width: 100% !important;
  }

  .option-btn {
    font-size: 16px;
    padding: 4px 0;
    min-width: 0;
    width: auto;
    text-align: left;
    border-radius: 10px;
    margin-top: 0;
    line-height: 1.7;
    word-break: break-word;
  }

  .option-btn:hover {
    color: #1454a5;
    background: rgba(25,118,210,0.09);
  }

  select {
    font-size: 17px;
  }
}
</style>



</head>
<body>
<div class="notice">
このチャットは試験的にAIボットを導入しています。<br>
ご不明点や不安なことがあれば、選択式で気軽に進めていただけます。<br>
※Botは実在の人物ではありません。<br>
※プライバシーに関する情報や個人の特定につながる発言はお控えください。
</div>
<div class="chat-area" id="chat"></div>
<script>
const BOT_ICON = "../../bot-icon-cropped.png";

// --- 各種配列・仕様：あなたの指示通り ---
const uneaseThemes = [
  { id:"week", label:"週◯日くらいしか入れないかも", pulldown:true, replies:{
    1:["週1だけでも全然アリ！無理しないのが一番だよ〜🌱","週1だけの子も多いし、無理なく始められるよ☺️","自分のペースでOK！週1から始めてる子もたくさんいるよ","週1ならプライベートも充実できるし、安心して続けられるよ！","週1だけ希望の人、意外と多いから気にしなくて大丈夫◎","週1ペースでもちゃんと活躍してる子いるよ☺️","最初は週1から始めて、慣れたら増やす子も多いよ〜","週1出勤、全然OK！自分の生活大事にしてね🌼","週1から始めてくれる子、実はめっちゃ多いよ！","無理なくマイペースでいこう！週1だけでも大丈夫👌"],
    2:["週2だけでも全然大丈夫！無理せず続けるのが一番だよ〜🌱","週2希望、むしろめちゃ現実的でいいと思う☺️","そのくらいのペースで働きたい子、多いから安心して！","週2出勤の子、すごく多いよ◎","本業や他の予定と両立しやすいペースだと思う！","週2なら無理なく続けられるからおすすめだよ〜","週2ペースで長く働いてる子も多いよ☺️","週2だけ希望、全然OKだよ！","そのくらいのペースが一番自分に合うって声多いよ🌿","週2から慣れていくのが一番だよ◎"],
    3:["週3日くらいなら生活とのバランスも取れて続けやすいね！","週3出勤の子、すごく多いよ☺️","自分に合ったペースでやれるから安心してね🌱","週3くらいで相談したいって子、かなり多いよ！","仕事や他の予定と無理なく両立してる子も多いよ◎","週3から増やしたり減らしたりも調整OK！","続けやすいリズムで働けるのが一番だよ☺️","“週3ってどう？”って質問すごく多いから、気にしなくて大丈夫！","自分のペース大事にしてね🌼","週3なら安定して収入も確保しやすいよ！"],
    4:["週4あればしっかり稼げるし、休みも取れるよ！","週4日でも無理ない範囲でOK🙆‍♀️","ガッツリ稼ぎたい子は週4〜5で頑張ってるよ！","生活と両立しやすいペースで相談できるから安心して☺️","週4で不安って子もいるけど、みんな無理なく続けてるよ〜🌱","“ちょっと多いかな？”って思う時は調整もできるから大丈夫！","週4でもプライベートしっかり充実できるよ◎","稼ぎたい時は週4以上もアリだよ！","無理なく働くことが一番大事だから、心配しないでね☺️","自分のペースに合わせてシフト決めていこう🌼"]
  }},
  { id:"mensetsu", label:"面接って緊張する", replies:[
    "緊張するの当たり前だよ〜大丈夫！",
    "“面接”って響きがもう緊張するよね💦 無理せずで大丈夫◎",
    "かしこまらず、リラックスして話せばOKだよ🌱",
    "実際は“相談会”みたいな雰囲気だから安心してね〜",
    "ガチガチの面接じゃないから、気楽に話せばOK！",
    "“雑談レベル”でゆるっと進むことが多いよ☺️",
    "不安なことは面接で聞いてもらって全然OKだよ◎",
    "深呼吸して、いつもの自分で話せば大丈夫🌼",
    "緊張してても大丈夫なように、優しく聞いてくれるから安心して☺️",
    "“うまく話せなかった…”って子でも採用されてるよ〜！"
  ]},
  { id:"yurui", label:"ゆるい雰囲気がいいな", replies:[
    "その気持ちめっちゃわかる〜🌱 気張らないって大事◎",
    "ゆる〜く働ける環境って、ほんとに安心感あるよね☺️",
    "ここ、いい意味でガチガチしてないから気楽に働けると思うよ〜",
    "“空気感”って大事だよね！リラックスして働けるとこだよ🌼",
    "無理にキャラ作らなくていい雰囲気がここにはあるよ〜！",
    "ピリピリしてないのが魅力のひとつだと思う◎",
    "のびのび働ける職場って、それだけで長く続けやすいよ☺️",
    "“ゆるさ”と“安心”が両立してるところ、ここだと思う🌿",
    "疲れてる日もゆるっといられる場所って貴重だよね💭",
    "マイペースで働きたいって気持ち、大事にしてOKだよ！"
  ]},
  { id:"kake", label:"掛け持ちでもいける？", replies:[
    "もちろん！本業と両立してる子めっちゃ多いよ〜☺️",
    "今の仕事と両立しながら働いてる子もたくさんいるよ◎",
    "無理なく続けてる子が多いから安心してね！",
    "ちょっとだけ働きたい人や、他のお仕事と掛け持ちしてる人もたくさんいるよ〜🌱",
    "生活優先で働いてる子も多いから、掛け持ち大歓迎だよ☺️",
    "他にも“本業と両立で働いて大丈夫？”って聞く子多いけど全然OK！",
    "本業や他の予定があっても働けるように調整できるよ！",
    "他の仕事や家庭と両立してる子も多いから、気軽に相談してね🌟",
    "掛け持ちから始めて慣れてく子もたくさんいるよ☺️",
    "自分のペース優先で働けるから安心してね◎"
  ]}
];

const otherThemes = [
  { id:"mikei", label:"未経験でも大丈夫？", replies:[
    "“はじめて”ってそれだけで緊張するよね💭 でもここ、未経験の子ほんとに多いから安心して☺️",
    "大丈夫◎ 最初からできなくて当たり前だし、少しずつ慣れていけばOKだよ🌱",
    "むしろ“未経験だから不安”って思える子のほうが、ちゃんとしてるって思う✨",
    "何から始めたらいいかわからなくても大丈夫、サポートはちゃんとあるよ☺️",
    "“わからないまま始めてもいいのかな…”っていう子、実はけっこう多いよ🌱",
    "最初はみんな手探りだからこそ、焦らず自分のペースで進めてOK◎",
    "いきなり全部覚えなくていいよ〜☺️ 少しずつ知っていければ充分！",
    "不安なことがあればいつでも聞ける環境だから、ひとりで抱え込まなくて大丈夫だよ",
    "“完璧じゃないとダメ”とか全然ないから、ほんと気軽な気持ちで大丈夫◎",
    "“想像よりゆるかった”って感じる子、意外と多いよ🌼 無理しなくてOK！"
  ]},
  { id:"nichibara", label:"日払いってほんと？", replies:[
    "うん、ほんとに“その日”にもらえるよ〜💰 すぐお財布あったかくなるの嬉しいよね☺️",
    "その日の分、ちゃんと受け取れるよ◎ 予定立てやすいって言われてる✨",
    "日払いOKだよ〜！“明日までに欲しい…”ってときも助かるやつ💸",
    "“働いたその日に受け取れる”って、地味にありがたいよね🌱",
    "“1週間後”とかじゃないから安心して！即日でちゃんともらえるよ〜💡",
    "リアルに“その日中”もらえるから、急な出費とかにも安心☺️",
    "“ほんとに出るの？”って思うかもだけど、ちゃんと即日OKだよ💬",
    "がんばった分がすぐもらえるって、やっぱモチベ違うよね🔥",
    "お金のことって心配になるよね💭 でもここは即日ちゃんと渡されるから大丈夫◎",
    "最初は半信半疑な子多いけど、“ほんとだった”ってなるパターン☺️"
  ]},
  { id:"bale", label:"身バレしない？", replies:[
    "バレたくないって気持ち、めっちゃわかる…！ちゃんと対策あるから安心してね👀",
    "顔出しナシでも全然OKだよ◎ 自分のペースとスタイルで働けるから🌱",
    "“知り合いに見られたらどうしよう…”って子、多いけどちゃんと配慮されてるよ☺️",
    "身バレ対策はしっかりしてるよ！バレたくないって相談する子めちゃ多いし👌",
    "SNSとか写真とか、不安なことは事前に言ってもらえたら対応できるよ〜💡",
    "“知り合いに見られたらやだな…”って思っても大丈夫◎希望に合わせて対応されてるよ",
    "顔出し自由・名前も本名じゃなくてOKだよ🌼 ちゃんと守られるから安心してね",
    "私のことってバレる？って不安になるのほんとわかる。そこ、ちゃんと大事にされてるから◎",
    "身バレ不安な子、正直かなり多いけど“今のとこ大丈夫だった”って声が多いよ☺️",
    "“働きたいけどバレたくない”って気持ち、すごく理解されてる職場だよ🌟"
  ]},
  { id:"tikoku", label:"遅刻・休みって厳しい？", replies:[
    "“絶対遅刻NG！”みたいなピリピリ感はないから安心して◎",
    "体調とか急な予定もあるよね💭相談すれば全然大丈夫だよ☺️",
    "“ゆるめな雰囲気”って感じだから、ガチガチに怒られたりとかないよ〜🌱",
    "無理しないでって言ってもらえる空気あるから、ほんと大丈夫◎",
    "“遅刻したらヤバいかも…”って緊張するのめっちゃわかる。でも意外と平和だよ☺️",
    "ちゃんと伝えれば怒られたりしないし、“無理せず”がベースの考え方だよ◎",
    "“迷惑かけたくない”って気持ちがあるだけで偉い…！それだけで十分すぎる✨",
    "ピシッとしてる子も多いけど、“ゆるさOK”なとこも魅力だったりするよ🌼",
    "お店によっては“連絡だけもらえればOK”ってとこも多いよ〜💡",
    "“サボり”じゃなければ理解あるよ☺️ お互いさまって考え方だから安心してね"
  ]},
  { id:"hanashidake", label:"とりあえず話だけ聞きたい", replies:[
    "もちろん🙆‍♀️ 話だけでも全然OKだよ〜！むしろ気軽に聞いてって感じ☺️",
    "“聞くだけ”って選択、大正解◎ 気になることだけでも話そう🌱",
    "まずは話聞いてから決めるのが安心だよね💭全然それでいいと思う！",
    "強引な勧誘とかないから、ちょっとでも気になったら話だけでも全然アリ✨",
    "“働くかどうかまだ決めてない…”って子、多いよ〜◎話だけでもWelcome🌼",
    "疑問だけ聞いて、あとでゆっくり考えるとかでも全然大丈夫☺️",
    "聞いてから“やっぱちがうかも”って思っても全然アリだよ〜🙆‍♂️",
    "“気になるけど動くのはまだ…”って時こそ、まずは話だけでも💡",
    "無理に応募させたりしないから大丈夫◎気になるとこだけピックして聞いてね☺️",
    "“とりあえず話だけ”ってすごく大事なステップだと思う！それでいいよ〜🌟"
  ]},
  { id:"hito", label:"人見知りだけど大丈夫？", replies:[
    "人見知りの子、ほんとに多いよ〜☺️ だからこそ安心して始められる環境なんだと思う🌱",
    "最初は無言でも全然OK🙆‍♀️ ゆっくり慣れていけるから安心してね◎",
    "“話すの苦手…”って子も、少しずつ自分のペースでやれてるから大丈夫だよ☺️",
    "緊張しながら来る子も多いけど、みんなそれぞれのペースで大丈夫って空気あるよ🌼",
    "いきなりテンション上げなくてOK◎ 無理して盛り上げる必要なんてないから安心してね",
    "人見知りって“気配りできる子”ってことでもあるから、むしろ向いてるかも☺️",
    "“話さなきゃダメ”って空気ないよ💭 そばにいてくれるだけで十分って場面も多いから◎",
    "“うまく話せない…”っていう気持ち、大事にされてるから心配しなくていいよ〜",
    "人見知りで相談くれる子、すごく多い！だからこそ対策もちゃんとあるよ💡",
    "はじめは静かでも全然OK🙆‍♂️ 無理にキャラ変しなくていい環境だから安心して◎"
  ]}
];

// --- 応募ヒアリング選択肢 ---
const ages = ["18〜22歳","23〜29歳","30代〜"];
const applyStyles = [
  "がっつり稼ぎたい",
  "本業と両立しながら働きたい",
  "短期・体験から始めたい"
];
const applyReasons = [
  "収入を増やしたい",
  "安心して始めたい",
  "自分らしく働きたい",
  "誰にも知られずこっそりやりたい",
  "この中にない"
];
const applyReasonsSub = [
  "新しいことに挑戦したい",
  "気持ちの余裕を作りたい",
  "直感で応募した",
  "とりあえず話だけ聞きたい",
  "うまく言えないけど何となく"
];

const applyAges = [
  "はじめまして。応募させていただきます！",
  "ご縁があればうれしいなと思って連絡しました。",
  "こちらのお仕事に興味を持って応募しました☺️",
  "自分にも合うかな…と思ってポチッとしてみました。",
  "なんとなく惹かれて、ご連絡してみました！",
  "ちょっと勇気出して応募してみました。",
  "気になることがあって、思いきって送ってみました🌱",
  "軽い気持ちではありますが、興味を持ったのでご連絡しました！",
  "自分なりにいろいろ考えて、ここならと思い応募しました☺️",
  "なんか気になって、ふと応募してみました！"
];
const applyStylesText = [
  "できれば自分のペースで働けたらいいなと思ってます。",
  "本業と両立しながら、無理なく続けられる形を探してます。",
  "しっかり働いてしっかり稼ぎたい気持ちがあります！",
  "最初は短期からでも始められたらうれしいです。",
  "まだちょっと迷ってますが、気軽に話だけでも聞けたらうれしいです。",
  "自分の生活に合わせて柔軟に働けるところを探してます。",
  "自分のペースで続けられる環境を大事にしたいと思ってます。",
  "空いた時間を活かして働けるといいなと考えています。",
  "負担になりすぎない形で始められたら理想です◎",
  "時間やシフトの融通がきく職場を希望しています！"
];
const applyReasonsText = [
  "安心できる環境で、自分らしく頑張りたいなと思いました。",
  "誰にも知られず、こっそり始められるのも魅力に感じてます。",
  "ちょっと生活に余裕がほしくて、いいきっかけになればと思ってます。",
  "新しいことにチャレンジしてみたくなったタイミングでした🌱",
  "自分でも意外だけど、直感で「いいかも」って思えたので応募してみました。",
  "働くことへの不安もあるけど、ここなら安心できそうだと思いました。",
  "自分らしさを大切にできそうな環境だと感じたからです。",
  "気持ちの余裕を作るためにも、今のうちに始めてみたいと思いました。",
  "自分にとって新しい世界に一歩踏み出してみたくなったからです。",
  "ゆるくて温かい雰囲気に惹かれて、ここで働いてみたいと思いました☺️"
];
const finishComments = [
  "おつかれさま〜！ここまでよく頑張ったね☺️",
  "ひとつずつ進めてくれてありがとう◎めちゃくちゃ助かる！",
  "不安な中でも進めてくれたの、ほんとにすごいことだと思う🌱",
  "ここまで来れたの、立派すぎる！自分を褒めてあげていいやつ✨",
  "応募ってちょっと勇気いるから、ここまで来た時点で大成功だよ！",
  "ちゃんと自分のこと考えて選べててえらすぎる…！",
  "丁寧に進めてくれてありがとう🌼感激してるよ",
  "最後まで来れたのほんとすごい◎ここから先はおまかせしてね！",
  "ここまで全部選んでくれてありがとう！あとはリラックスして大丈夫☺️",
  "よくがんばった〜！その気持ち、しっかり伝わってると思うよ◎"
];

// チャットロジック
const chat = document.getElementById('chat');
const scroll = () => setTimeout(()=>{chat.scrollTop=chat.scrollHeight},10);
const pick = arr => arr[Math.floor(Math.random()*arr.length)];
const wrap = () => {const d=document.createElement('div');d.className='options-wrap';chat.appendChild(d);return d;}

// 【選択値（年齢/働き方/理由等）用：左寄せ】★これをデフォルトで使う
const user = txt => {
  const d = document.createElement('div');
  d.className = 'user-comment';
  d.textContent = txt;
  chat.appendChild(d);
}

// 【応募文（3つの中央寄せ青リンク）用：中央寄せ】
const userCenter = txt => {
  const d = document.createElement('div');
  d.className = 'center-text-block';
  d.textContent = txt;
  chat.appendChild(d);
}

const bot = txt => {
  const d = document.createElement('div');
  d.className = 'bot-comment';
  d.innerHTML = `<img src="${BOT_ICON}"><span class="bot-comment-text">${txt}</span>`;
  chat.appendChild(d);
}
const type = (cb,ms=900) => {
  const t = document.createElement('div');
  t.className = 'bot-typing';
  t.textContent = '入力中...';
  chat.appendChild(t);
  setTimeout(()=>{t.remove();cb();},ms);
}


let mode = "main";
let weekLabel = "";
let remainMain = [...uneaseThemes];
let remainOther = [...otherThemes];

// メイン選択肢
function renderMain(){
  if(mode !== "main") return;
  if(remainMain.length === 0){
    if(remainOther.length > 0){
      mode = "other";
      renderOther();
      return;
    }else{
      phoneStep();
      return;
    }
  }
  const box = wrap();
  remainMain.slice(0,4).forEach(th=>{
    const btn = document.createElement('button');
    btn.className='option-btn';
    btn.textContent = th.id==="week" && weekLabel ? weekLabel : th.label;
    btn.onclick = ()=> selectMain(th,btn,box);
    box.appendChild(btn);
  });
  if(remainOther.length>0){
    const btnOther=document.createElement('button');btnOther.className='option-btn';btnOther.textContent="他の項目も見てみる";
    btnOther.onclick=()=>{
      box.remove();
      mode = "other";
      renderOther();
    };
    box.appendChild(btnOther);
  }
  const skip=document.createElement('button');
  skip.className='option-btn';skip.textContent='特にない（応募に進む）';skip.style.color="#888";
  skip.onclick=()=>{box.remove();phoneStep();};
  box.appendChild(skip);
  scroll();
}
function selectMain(th, btn, box){
  if(th.pulldown){
    btn.disabled=true;
    const pd=document.createElement('div');pd.className='pulldown-wrap';
    const sel=document.createElement('select');
    [1,2,3,4].forEach(n=>{
      const o=document.createElement('option');
      o.value=n;
      o.textContent=`${n}日`;
      sel.appendChild(o);
    });
    const ok=document.createElement('button');
    ok.textContent='OK';
    ok.onclick=()=>{
      weekLabel=`週${sel.value}日くらいしか入れないかも`;
      user(weekLabel);pd.remove();box.remove();
      type(()=>{
        bot(pick(th.replies[sel.value]));
        removeMain(th.id);
        renderMain();
      },600);
    };
    pd.appendChild(sel);pd.appendChild(ok);btn.after(pd);scroll();
    return;
  }
  // ここ！選択済みはuser(th.label)だけ、button生成はしない
  user(th.label);
  box.remove();
  type(()=>{
    bot(pick(th.replies));
    removeMain(th.id);
    renderMain();
  },600);
}

// remainMainからidで1件だけ消す
function removeMain(id){
  remainMain = remainMain.filter(x=>x.id!==id);
}

// 他の質問
function renderOther(){
  if(mode !== "other") return;
  if(remainOther.length === 0){
    phoneStep();
    return;
  }
  const box = wrap();
  remainOther.forEach(th=>{
    const btn = document.createElement('button');
    btn.className='option-btn';btn.textContent=th.label;
    btn.onclick=()=>{
      user(th.label);box.remove();
      type(()=>{
        bot(pick(th.replies));
        remainOther = remainOther.filter(x=>x.id!==th.id);
        if(remainOther.length === 0){
          phoneStep();
        }else{
          renderOther();
        }
      },600);
    };
    box.appendChild(btn);
  });
  const skip=document.createElement('button');
  skip.className='option-btn';skip.textContent='特にない（応募に進む）';skip.style.color="#888";
  skip.onclick=()=>{box.remove();phoneStep();};
  box.appendChild(skip);
  scroll();
}

// 応募ヒアリングフロー
let ageSel="",styleSel="",reasonSel="",reasonSubSel="";
function phoneStep(){
  mode = "done";
  type(()=>{
    bot("まずは“ちょっと聞いてみる”感じで電話してみても大丈夫だよ📞 無理に話さなくてもOKだから、気軽にね☺️");
    const box=wrap();
    const tel=document.createElement('button');tel.className='option-btn';tel.textContent='電話で確認する';
    tel.onclick=()=>window.location.href='tel:0000000000';
    const skip=document.createElement('button');skip.className='option-btn';skip.textContent='電話は緊張する…LINE／メールで進めたい';
    skip.onclick=()=>{
      box.remove();
      // --- 必須案内テキストここで出す ---
      type(()=>{
        bot("このあと、いくつか選ぶだけであなただけの応募文が自動で完成するよ✌️<br>むずかしいことは考えなくて大丈夫。いつもの自分の感覚でポチポチ選ぶだけで、ちゃんと“伝わる文章”になるから安心してね！<br>サクッと応募できるから、気楽に進めてみて〜🌱");
        ageStep();
      },600);
    };
    box.appendChild(tel);box.appendChild(skip);scroll();
  },600);
}
function showList(arr,cb){const box=wrap();arr.forEach(t=>{const b=document.createElement('button');b.className='option-btn';b.textContent=t;b.onclick=()=>{user(t);box.remove();cb(t);};box.appendChild(b);});scroll();}
function ageStep(){
  type(()=>{
    bot("ざっくり年代だけ教えてもらえる？☺️");
    showList(ages,v=>{ageSel=v;styleStep();});
  },400);
}
function styleStep(){
  type(()=>{
    bot("働き方のイメージはどれが近い？🌱");
    showList(applyStyles,v=>{styleSel=v;reason1Step();});
  },400);
}
function reason1Step(){
  type(()=>{
    bot("応募理由で一番近いのは？");
    showList(applyReasons,v=>{
      reasonSel=v;
      if(v==="この中にない"){
        reasonSubStep();
      }else{
        applicationStep();
      }
    });
  },400);
}
function reasonSubStep(){
  type(()=>{
    bot("近いものを選んでね！");
    showList(applyReasonsSub,v=>{reasonSubSel=v;applicationStep();});
  },400);
}
function applicationStep(){
  // 各パート10個から3つずつシャッフル・重複なしで抽出
  function pick3(arr) {
    let a = arr.slice();
    for(let i = a.length - 1; i > 0; i--) {
      let j = Math.floor(Math.random() * (i + 1));
      [a[i], a[j]] = [a[j], a[i]];
    }
    return a.slice(0, 3);
  }
  const agePicks = pick3(applyAges);
  const stylePicks = pick3(applyStylesText);
  const reasonArr = (reasonSel==="この中にない")
    ? [reasonSubSel, ...pick3(applyReasonsText).slice(0,2)]
    : pick3(applyReasonsText);

  // 1つずつ組み合わせ、3セット作る（かぶらない！）
  const patterns = [
    `${agePicks[0]}\n${stylePicks[0]}\n${reasonArr[0]}`,
    `${agePicks[1]}\n${stylePicks[1]}\n${reasonArr[1]}`,
    `${agePicks[2]}\n${stylePicks[2]}\n${reasonArr[2]}`
  ];
  type(()=>{
    bot("3つ考えてみたよ！気に入ったものを選んでね✍️");
    showApps(patterns);
  },900);
}

function showApps(list){
    
// 既存の「3つ考えてみたよ！」Bot発言を消す
Array.from(document.querySelectorAll('.bot-comment')).forEach(el => {
  if(el.textContent.includes('3つ考えてみたよ')) el.remove();
});
// 既存の「もう1回作る」を含む選択肢セットを消す
Array.from(document.querySelectorAll('.options-wrap')).forEach(el => {
  if(el.textContent.includes('もう1回作る')) el.remove();
});

  const box=wrap();
  box.classList.add("apps-wrap"); 
  list.forEach((t,i)=>{
    const b=document.createElement('button');b.className='option-btn';b.textContent=`${i+1}) ${t}`;
    b.onclick=()=>{user(t);box.remove();finishStep();};
    box.appendChild(b);
  });
  const ag=document.createElement('button');ag.className='option-btn';ag.textContent='もう1回作る';
  ag.style.marginTop = "28px";
  ag.onclick=()=>{box.remove();applicationStep();};
  box.appendChild(ag);scroll();
}
function finishStep(){type(()=>{bot(pick(finishComments));contactStep();},800);}
function contactStep(){
  type(()=>{
    bot("最後に連絡方法を選んでね！好きな方で応募できるよ☺️<br>自分のペースで進めてね！");
    const box=wrap();
    const ln=document.createElement('button');ln.className='option-btn';ln.textContent='【LINEで応募する】';
    ln.onclick=()=>{
      window.open('https://line.me/R/');
      bot("LINEの友だち追加ページに進むよ！友だち追加ができたら、そのまま応募内容が送れるから“送信”だけでOKだよ☺️");
      box.remove(); finalStep();
    };
    const em=document.createElement('button');em.className='option-btn';em.textContent='【メールで応募する】';
    em.onclick=()=>{
      window.open('mailto:');
      bot("メール作成画面に進むよ！内容は自動で入ってるから、そのまま送信すれば大丈夫◎ゆっくり確認してOKだよ！");
      box.remove(); finalStep();
    };
    box.appendChild(ln);box.appendChild(em);scroll();
  },900);
}
function finalStep(){type(()=>{bot("これで応募は完了だよ！ここまで進めてくれて本当にありがとう。何か分からないことがあったら、また気軽に聞いてね🌱");scroll();},1000);}

type(()=>{
  bot("応募の前に、気になることがあれば選んでね☺️ 気軽にポチポチ進めてもらえたら大丈夫だよ〜🌱");
  renderMain();
  scroll();
},600);

</script>
</body>
</html>
